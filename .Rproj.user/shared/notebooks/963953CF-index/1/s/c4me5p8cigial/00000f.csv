"0",""
"0","# -----------------------------------------------------------"
"0","# Load libraries"
"0","# -----------------------------------------------------------"
"0",""
"0","library(tidyverse)"
"0","library(lubridate)"
"0","library(highcharter)"
"0","library(DT)"
"0","library(bslib)"
"0","library(bsicons)"
"0","library(shiny)"
"0","library(gt)"
"0","library(glue)"
"0","library(gtExtras)"
"0","library(kableExtra)"
"0","library(readxl)"
"0","library(scales)"
"0","library(formattable)"
"0","library(robotoolbox)"
"0","library(dm)"
"0","library(qcc)"
"0","library(plotly)"
"0","library(knitr)"
"0","library(gridExtra)"
"0","library(ggthemes)"
"0",""
"0","# Source functions"
"0","source(file=""./R-scripts/00-functions.R"")"
"0",""
"0","# -----------------------------------------------------------"
"0","# 1. Connect remotely to Kobotoolbox database via the API"
"0","#    "
"0","# -----------------------------------------------------------"
"0",""
"0","## The first step is to get your API token from your Kobotoolbox account"
"0",""
"0",""
"0","mytoken <- ""07cdf3134d0f4352b54cf83edaa59101bc02990e"""
"0",""
"0",""
"0","## With the token you can now setup the robotoolbox package."
"0",""
"0","kobo_setup(url = ""https://kf.kobotoolbox.org/"", token = mytoken)"
"0",""
"0","# Now you can access all your projects and read the data from the project you picked. "
"0","# You can list project using kobo_asset_list()."
"0",""
"0","my_projects_list <- kobo_asset_list()"
"0",""
"0","# Letâ€™s pick the second project and load it"
"0",""
"0","uid <- my_projects_list$uid[1]"
"0",""
"0","# Initialize it as an asset"
"0","asset <- kobo_asset(uid)"
"0",""
"0","# With the asset you can now read your data"
"0","df_raw <- kobo_data(asset)"
"0",""
"0","# -----------------------------------------------------------"
"0","# 2. (Optional) Clean or rename columns for easier reference"
"0","# -----------------------------------------------------------"
"0","# Sometimes R automatically converts special characters (spaces, parentheses)."
"0","# If your 'Amount (UGX)' column is not easy to reference, rename it:"
"0",""
"0",""
"0","df <- df_raw |> "
"0","  rename("
"0","    Amount_UGX = amount_manual,"
"0","    Batch_Number = batch"
"0","  ) |> "
"0","  filter( account_type != ""capex"") |> "
"0","  filter(Batch_Number != ""3"") |> "
"0","  select(!(""_attachments""))"
"0",""
"0","transactions <- df"
"0",""
"0","# write.csv(df, ""data/jc_farms_transaction_data_20251228.csv"",row.names = FALSE)"
"0",""
